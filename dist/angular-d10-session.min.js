!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){a.module("d10-session",["d10-rest"]).service("d10session",function(a,b){function c(a){var b=Array.isArray(a)?a.join(":"):a;return f+":"+b}var f="d10:session",g=function(){function b(a,c){d(this,b),this.d10API=a,this._pubsub=c,this._isStarted=!1,this._isLogged=null,this.userinfos=null}return e(b,[{key:"_setLogged",value:function(a){this._isLogged=!0,this._isStarted=!1,this.userinfos=a}},{key:"_setNotLogged",value:function(){this._isLogged=!1,this._isStarted=!1,this.userinfos=null}},{key:"start",value:function(){var b=this;if(!this._isStarted)return this._isStarted=!0,this._pubsub.$broadcast(c("start")),a.getUserinfos().then(function(a){b._setLogged(a)},function(){b._setNotLogged()}).then(function(){if(b._isStarted)return b._pubsub.$broadcast(c(["start","success"])),b._isStarted;throw b._pubsub.$broadcast(c(["start","error"])),new Error("User is not logged")})}},{key:"login",value:function(b,d){var e=this;return this._pubsub.$broadcast(c("login")),a.login(b,d).then(function(a){return e._pubsub.$broadcast(c(["login","success"]),a),e.start()},function(a){throw e._pubsub.$broadcast(c(["login","error"])),a})}},{key:"isLogged",value:function(){return this._isLogged}},{key:"isStarted",value:function(){return this._isStarted}},{key:"getUserinfos",value:function(){return this.userinfos}}]),b}();return new g(a,b)})}(angular)},{}]},{},[1]);